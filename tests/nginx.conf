
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
    worker_connections  1024;
}


stream {
    
    upstream tcptest_host {
        server localhost:4200 max_fails=3 fail_timeout=30s;
        # server localhost:4201 max_fails=3 fail_timeout=30s;
        # server localhost:4202 max_fails=3 fail_timeout=30s;
        # server localhost:4203 max_fails=3 fail_timeout=30s;
        # server localhost:4204 max_fails=3 fail_timeout=30s;
        # server localhost:4205 max_fails=3 fail_timeout=30s;
        # server localhost:4206 max_fails=3 fail_timeout=30s;
        # server localhost:4207 max_fails=3 fail_timeout=30s;
        # server localhost:4208 max_fails=3 fail_timeout=30s;
        # server localhost:4209 max_fails=3 fail_timeout=30s;
        # server localhost:4210 max_fails=3 fail_timeout=30s;
        
    }
    
    
    server {
        listen 4300;
        proxy_connect_timeout 1s;
        proxy_timeout 30s;
        proxy_pass tcptest_host;
    }
    
}



